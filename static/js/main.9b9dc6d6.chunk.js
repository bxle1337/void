(this.webpackJsonpruby=this.webpackJsonpruby||[]).push([[0],{128:function(e,t,c){"use strict";c.r(t);var n=c(0),s=c(25),r=c.n(s),a=c(14),i=c.n(a),o=c(15),l=c.n(o),u=c(22),b=c(16),d=c(6),j=c(132),h=(c(121),c(122),c(30),c(126),c.p,c(129)),p=c(130),f=c(131),O=c(4),m=function(e){var t,c,s=e.id,r=(e.go,e.fetchedUser),a=e.Score,o=e.Fact,j=e.setPopout,m=e.Online,x=Object(n.useState)("white"),k=Object(b.a)(x,2),g=k[0],v=k[1];return i.a.subscribe((function(e){var t=e.detail,c=t.type,n=t.data;if("VKWebAppUpdateConfig"===c){var s=document.createAttribute("scheme");s.value=n.scheme?n.scheme:"bright_light",v("bright_light"!==n.scheme?"black":"white"),document.body.attributes.setNamedItem(s)}})),Object(O.jsx)(d.n,{id:s,children:Object(O.jsxs)("div",{className:"rootPanel",children:[Object(O.jsx)(d.o,{children:"\u0413\u043b\u0430\u0432\u043d\u0430\u044f"}),Object(O.jsxs)(d.l,{children:[Object(O.jsx)("center",{children:Object(O.jsxs)("div",{className:"mainblock",children:[Object(O.jsxs)(d.u,{weight:"regular",style:{marginBottom:-80},children:["\u041e\u043d\u043b\u0430\u0439\u043d: ",m]}),Object(O.jsx)("h1",{className:"score",id:"score",children:a.toFixed(0)}),Object(O.jsx)(d.u,{weight:"regular",style:{marginTop:-80},children:(t=a,c=["\u0441\u0435\u043a\u0443\u043d\u0434\u0430","\u0441\u0435\u043a\u0443\u043d\u0434\u044b","\u0441\u0435\u043a\u0443\u043d\u0434"],c[t%100>4&&t%100<20?2:[2,0,1,1,1,2][t%10<5?t%10:5]])})]})}),Object(O.jsx)(d.h,{children:Object(O.jsx)("center",{children:o})})]}),r&&Object(O.jsx)(d.i,{vertical:"bottom",style:{marginBottom:16},children:Object(O.jsxs)(d.h,{style:{display:"flex"},children:[Object(O.jsx)(d.g,{size:"s",stretched:!0,mode:"secondary",before:Object(O.jsx)(h.a,{fill:"black"===g?"white":"black"}),style:{marginRight:8,color:"black"===g?"white":"black"},children:" \u0422\u043e\u043f "}),Object(O.jsx)(d.g,{size:"s",stretched:!0,mode:"secondary",before:Object(O.jsx)(p.a,{fill:"black"===g?"white":"black"}),style:{color:"black"===g?"white":"black"},onClick:function(){j(Object(O.jsxs)(d.a,{onClose:function(){return j(null)},children:[Object(O.jsx)(d.h,{children:Object(O.jsx)(d.k,{header:"\u0421\u0441\u044b\u043b\u043a\u0430 \u043d\u0430 \u043f\u0435\u0440\u0435\u0432\u043e\u0434",mode:"default",children:"\u0422\u0432\u043e\u044f \u0441\u0441\u044b\u043b\u043a\u0430 \u043d\u0430 \u043f\u0435\u0440\u0435\u0432\u043e\u0434, \u043f\u0435\u0440\u0435\u0439\u0434\u044f \u043f\u043e \u043d\u0435\u0439, \u0438\u0433\u0440\u043e\u043a \u0441\u043c\u043e\u0436\u0435\u0442 \u043f\u0435\u0440\u0435\u0432\u0435\u0441\u0442\u0438 \u0442\u0435\u0431\u0435 \u0441\u0435\u043a\u0443\u043d\u0434\u044b... \u0425\u043e\u0442\u044f.. \u0417\u0430\u0447\u0435\u043c \u043e\u043d\u0438 \u0442\u0435\u0431\u0435?"})}),Object(O.jsxs)(d.s,{disabled:!0,after:Object(O.jsx)(f.a,{fill:"black"===g?"white":"black",onClick:Object(u.a)(l.a.mark((function e(){return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,i.a.send("VKWebAppCopyText",{text:"vk.com/app7966180#t"+r.id});case 2:1==e.sent.result?i.a.send("VKWebAppTapticNotificationOccurred",{type:"success"}):i.a.send("VKWebAppTapticNotificationOccurred",{type:"error"});case 4:case"end":return e.stop()}}),e)})))}),children:["vk.com/app7966180#t",r.id]}),Object(O.jsx)(d.b,{autoclose:!0,mode:"destructive",children:"\u0417\u0430\u043a\u0440\u044b\u0442\u044c"})]}))},children:" \u041f\u0435\u0440\u0435\u0432\u043e\u0434 "})]})})]})})},x=c.p+"static/media/persik.ae9f0072.png",k=function(e){return Object(O.jsxs)(d.n,{id:e.id,children:[Object(O.jsx)(d.o,{left:Object(O.jsx)(d.p,{onClick:e.go,"data-to":"home"}),children:"Persik"}),Object(O.jsx)("img",{className:"Persik",src:x,alt:"Persik The Cat"})]})},g=new WebSocket("wss://freevkstickers.ru:9000"),v=function(){var e=Object(n.useState)("home"),t=Object(b.a)(e,2),c=t[0],s=t[1],r=Object(n.useState)(null),a=Object(b.a)(r,2),o=a[0],h=a[1],p=Object(n.useState)(Object(O.jsx)(d.r,{size:"large"})),f=Object(b.a)(p,2),x=f[0],v=f[1],y=Object(n.useState)(0),w=Object(b.a)(y,2),S=w[0],A=w[1],C=Object(n.useState)(10),N=Object(b.a)(C,2),W=N[0],_=N[1],I=Object(n.useState)("\u0417\u0430\u0433\u0440\u0443\u0436\u0430\u0435\u043c \u0444\u0430\u043a\u0442\u044b, \u0447\u0442\u043e\u0431\u044b \u0442\u0435\u0431\u0435 \u0431\u044b\u043b\u043e \u043d\u0435 \u0441\u043a\u0443\u0447\u043d\u043e..."),K=Object(b.a)(I,2),V=K[0],T=K[1],P=Object(n.useState)("white"),B=Object(b.a)(P,2),U=B[0],E=B[1];Object(n.useEffect)((function(){function e(){return(e=Object(u.a)(l.a.mark((function e(){var t;return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,i.a.send("VKWebAppGetUserInfo");case 2:t=e.sent,h(t);case 4:case"end":return e.stop()}}),e)})))).apply(this,arguments)}i.a.subscribe((function(e){var t=e.detail,c=t.type,n=t.data;if("VKWebAppUpdateConfig"===c){var s=document.createAttribute("scheme");s.value=n.scheme?n.scheme:"bright_light",E("bright_light"!==n.scheme?"black":"white"),document.body.attributes.setNamedItem(s)}})),function(){e.apply(this,arguments)}()}),[]);var J=function(e){s(e.currentTarget.dataset.to)};function z(){return F.apply(this,arguments)}function F(){return(F=Object(u.a)(l.a.mark((function e(){var t;return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,i.a.send("VKWebAppGetUserInfo");case 2:t=e.sent,g.send(JSON.stringify({event:"registration",params:window.location.search,user:t}));case 4:case"end":return e.stop()}}),e)})))).apply(this,arguments)}return g.onopen=function(){var e=Object(u.a)(l.a.mark((function e(t){return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,i.a.send("VKWebAppGetAuthToken",{app_id:7966180,scope:""});case 2:e.sent.access_token&&z();case 4:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),g.onmessage=function(e){try{var t=JSON.parse(e.data);switch(t.event){case"setscore":A(+S+ +t.value);break;case"fact":T(t.value);break;case"online":_(t.value);break;case"transfercomplite":A(t.value),v(Object(O.jsx)(d.t,{before:Object(O.jsx)(j.a,{fill:"black"===U?"white":"black"}),duration:1300,onClose:function(){return v(null)},children:"\u041f\u0435\u0440\u0435\u0432\u043e\u0434 \u0432\u044b\u043f\u043e\u043b\u043d\u0435\u043d."}));break;case"transferalert":v(Object(O.jsx)(d.d,{actions:[{title:"\u0417\u0430\u043a\u0440\u044b\u0442\u044c",mode:"destructive",autoclose:!0}],actionsLayout:"vertical",onClose:function(){return v(null)},header:"\u041d\u043e\u0432\u044b\u0439 \u043f\u0435\u0440\u0435\u0432\u043e\u0434",text:"".concat(t.about.first_name," \u043f\u0435\u0440\u0435\u0432\u0435\u043b \u0432\u0430\u043c ").concat(t.summa," \u0441\u0435\u043a\u0443\u043d\u0434")}));break;case"good":if(v(null),window.location.hash.indexOf("#t")>-1){var c=function(){var e=Object(u.a)(l.a.mark((function e(){var t,c,s;return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=btoa(window.location.search),e.next=3,fetch("https://h154851.srv11.test-hf.su/void/api.php?action=getuser&key="+t+"&id="+n);case 3:return c=e.sent,e.next=6,c.json();case 6:"good"==(s=e.sent).status&&v(Object(O.jsxs)(d.a,{onClose:function(){return v(null)},children:[Object(O.jsx)(d.k,{header:"\u041e\u0448\u0438\u0431\u043a\u0430",mode:"error",id:"transferalert",style:{display:"none",color:"red",marginRight:8}}),Object(O.jsxs)(d.q,{before:Object(O.jsx)(d.f,{size:48,src:s.response.photo_200}),caption:"\u041f\u043e\u043b\u0443\u0447\u0438\u0442 \u0432\u0430\u0448\u0438 \u0441\u0435\u043a\u0443\u043d\u0434\u044b",children:[s.response.first_name," ",s.response.last_name]}),Object(O.jsx)(d.j,{top:"\u0421\u0443\u043c\u043c\u0430",children:Object(O.jsx)(d.m,{id:"summa",type:"number"})}),Object(O.jsx)(d.b,{onClick:function(){var e=document.getElementById("summa").value;g.send(JSON.stringify({event:"transfer",params:window.location.search,toid:n,summa:e}))},children:"\u041f\u0435\u0440\u0435\u0432\u0435\u0441\u0442\u0438"}),Object(O.jsx)(d.b,{autoclose:!0,mode:"destructive",children:"\u0417\u0430\u043a\u0440\u044b\u0442\u044c"})]}));case 8:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),n=window.location.hash.replace(/[^+\d]/g,"");c()}break;case"errortransfer":try{document.getElementById("transferalert").style.display="block",document.getElementById("transferalert").innerHTML=t.message}catch(s){}}}catch(s){console.log("\u041e\u0448\u0438\u0431\u043a\u0430 "+s)}},Object(O.jsx)(d.c,{children:Object(O.jsx)(d.e,{children:Object(O.jsxs)(d.v,{activePanel:c,popout:x,children:[Object(O.jsx)(m,{id:"home",fetchedUser:o,go:J,Online:W,setPopout:v,Score:S,Fact:V}),Object(O.jsx)(k,{id:"persik",go:J})]})})})};i.a.send("VKWebAppInit"),r.a.render(Object(O.jsx)(v,{}),document.getElementById("root"))},30:function(e,t,c){}},[[128,1,2]]]);
//# sourceMappingURL=main.9b9dc6d6.chunk.js.map