(this.webpackJsonpruby=this.webpackJsonpruby||[]).push([[0],{126:function(e,t,c){"use strict";c.r(t);var r=c(0),n=c(25),a=c.n(n),s=c(14),i=c.n(s),o=c(15),l=c.n(o),u=c(20),d=c(16),b=c(6),j=c(130),h=(c(119),c(120),c(30),c(124),c.p,c(127)),p=c(128),f=c(129),O=c(3),m=function(e){var t,c,n=e.id,a=(e.go,e.fetchedUser),s=e.Score,o=e.Fact,j=e.setPopout,m=e.Online,x=Object(r.useState)("white"),k=Object(d.a)(x,2),v=k[0],g=k[1];return i.a.subscribe((function(e){var t=e.detail,c=t.type,r=t.data;if("VKWebAppUpdateConfig"===c){var n=document.createAttribute("scheme");n.value=r.scheme?r.scheme:"bright_light",g("bright_light"!==r.scheme?"black":"white"),document.body.attributes.setNamedItem(n)}})),Object(O.jsx)(b.n,{id:n,children:Object(O.jsxs)("div",{className:"rootPanel",children:[Object(O.jsx)(b.o,{children:"\u0413\u043b\u0430\u0432\u043d\u0430\u044f"}),Object(O.jsxs)(b.l,{children:[Object(O.jsx)("div",{className:"onlineblock",style:{backgroundColor:"black"===v?"white":"black"},children:Object(O.jsx)("center",{children:Object(O.jsxs)("a",{style:{color:v},children:["\u041e\u043d\u043b\u0430\u0439\u043d: ",m]})})}),Object(O.jsx)("center",{children:Object(O.jsxs)("div",{className:"mainblock",children:[Object(O.jsx)("h1",{className:"score",id:"score",children:s.toFixed(0)}),Object(O.jsx)(b.w,{weight:"regular",style:{marginTop:-80},children:(t=s,c=["\u0441\u0435\u043a\u0443\u043d\u0434\u0430","\u0441\u0435\u043a\u0443\u043d\u0434\u044b","\u0441\u0435\u043a\u0443\u043d\u0434"],c[t%100>4&&t%100<20?2:[2,0,1,1,1,2][t%10<5?t%10:5]])})]})}),Object(O.jsx)(b.h,{children:Object(O.jsx)("center",{children:o})})]}),a&&Object(O.jsx)(b.i,{vertical:"bottom",style:{marginBottom:16},children:Object(O.jsxs)(b.h,{style:{display:"flex"},children:[Object(O.jsx)(b.g,{size:"s",stretched:!0,mode:"secondary",before:Object(O.jsx)(h.a,{fill:"black"===v?"white":"black"}),style:{marginRight:8,color:"black"===v?"white":"black"},children:" \u0422\u043e\u043f "}),Object(O.jsx)(b.g,{size:"s",stretched:!0,mode:"secondary",before:Object(O.jsx)(p.a,{fill:"black"===v?"white":"black"}),style:{color:"black"===v?"white":"black"},onClick:function(){j(Object(O.jsxs)(b.a,{onClose:function(){return j(null)},children:[Object(O.jsx)(b.h,{children:Object(O.jsx)(b.k,{header:"\u0421\u0441\u044b\u043b\u043a\u0430 \u043d\u0430 \u043f\u0435\u0440\u0435\u0432\u043e\u0434",mode:"default",children:"\u0422\u0432\u043e\u044f \u0441\u0441\u044b\u043b\u043a\u0430 \u043d\u0430 \u043f\u0435\u0440\u0435\u0432\u043e\u0434, \u043f\u0435\u0440\u0435\u0439\u0434\u044f \u043f\u043e \u043d\u0435\u0439, \u0438\u0433\u0440\u043e\u043a \u0441\u043c\u043e\u0436\u0435\u0442 \u043f\u0435\u0440\u0435\u0432\u0435\u0441\u0442\u0438 \u0442\u0435\u0431\u0435 \u0441\u0435\u043a\u0443\u043d\u0434\u044b... \u0425\u043e\u0442\u044f.. \u0417\u0430\u0447\u0435\u043c \u043e\u043d\u0438 \u0442\u0435\u0431\u0435?"})}),Object(O.jsxs)(b.u,{disabled:!0,after:Object(O.jsx)(f.a,{fill:"black"===v?"white":"black",onClick:Object(u.a)(l.a.mark((function e(){return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,i.a.send("VKWebAppCopyText",{text:"vk.com/app7966180#t"+a.id});case 2:1==e.sent.result?i.a.send("VKWebAppTapticNotificationOccurred",{type:"success"}):i.a.send("VKWebAppTapticNotificationOccurred",{type:"error"});case 4:case"end":return e.stop()}}),e)})))}),children:["vk.com/app7966180#t",a.id]}),Object(O.jsx)(b.b,{autoclose:!0,mode:"destructive",children:"\u0417\u0430\u043a\u0440\u044b\u0442\u044c"})]}))},children:" \u041f\u0435\u0440\u0435\u0432\u043e\u0434 "})]})})]})})},x=function(e){var t=e.id,c=e.Erorr;return Object(O.jsx)(b.n,{id:t,children:Object(O.jsx)(b.r,{header:"\u041e\u0448\u0438\u0431\u043a\u0430",stretched:!0,children:c})})},k=function(e){var t=e.id,c=e.Erorr;return Object(O.jsx)(b.n,{id:t,children:Object(O.jsx)(b.r,{icon:Object(O.jsx)(b.q,{}),header:"\u0417\u0430\u0433\u0440\u0443\u0437\u043a\u0430",stretched:!0,children:c})})},v=c.p+"static/media/persik.ae9f0072.png",g=function(e){return Object(O.jsxs)(b.n,{id:e.id,children:[Object(O.jsx)(b.o,{left:Object(O.jsx)(b.p,{onClick:e.go,"data-to":"home"}),children:"Persik"}),Object(O.jsx)("img",{className:"Persik",src:v,alt:"Persik The Cat"})]})},w=new WebSocket("wss://freevkstickers.ru:9000"),y=function(){var e=Object(r.useState)("loading"),t=Object(d.a)(e,2),c=t[0],n=t[1],a=Object(r.useState)(null),s=Object(d.a)(a,2),o=s[0],h=s[1],p=Object(r.useState)(Object(O.jsx)(b.t,{size:"large"})),f=Object(d.a)(p,2),v=f[0],y=f[1],S=Object(r.useState)(0),C=Object(d.a)(S,2),A=C[0],N=C[1],P=Object(r.useState)(10),W=Object(d.a)(P,2),_=W[0],I=W[1],K=Object(r.useState)("\u0417\u0430\u0433\u0440\u0443\u0436\u0430\u0435\u043c \u0444\u0430\u043a\u0442\u044b, \u0447\u0442\u043e\u0431\u044b \u0442\u0435\u0431\u0435 \u0431\u044b\u043b\u043e \u043d\u0435 \u0441\u043a\u0443\u0447\u043d\u043e..."),V=Object(d.a)(K,2),E=V[0],T=V[1],U=Object(r.useState)("white"),B=Object(d.a)(U,2),J=B[0],z=B[1],F=Object(r.useState)("\u041e\u0448\u0438\u0431\u043a\u0430 \u043f\u043e\u0434\u043a\u043b\u044e\u0447\u0435\u043d\u0438\u044f \u043a \u0441\u0435\u0440\u0432\u0435\u0440\u0443. \u041f\u043e\u043f\u0440\u043e\u0431\u0443\u0439 \u0437\u0430\u0439\u0442\u0438 \u0447\u0443\u0442\u044c \u043f\u043e\u0437\u0436\u0435."),G=Object(d.a)(F,2),L=G[0],R=G[1];Object(r.useEffect)((function(){function e(){return(e=Object(u.a)(l.a.mark((function e(){var t;return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,i.a.send("VKWebAppGetUserInfo");case 2:t=e.sent,h(t),y(null);case 5:case"end":return e.stop()}}),e)})))).apply(this,arguments)}i.a.subscribe((function(e){var t=e.detail,c=t.type,r=t.data;if("VKWebAppUpdateConfig"===c){var n=document.createAttribute("scheme");n.value=r.scheme?r.scheme:"bright_light",z("bright_light"!==r.scheme?"black":"white"),document.body.attributes.setNamedItem(n)}})),function(){e.apply(this,arguments)}()}),[]);var q=function(e){n(e.currentTarget.dataset.to)};function H(){return M.apply(this,arguments)}function M(){return(M=Object(u.a)(l.a.mark((function e(){var t;return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,i.a.send("VKWebAppGetUserInfo");case 2:t=e.sent,w.send(JSON.stringify({event:"registration",params:window.location.search,user:t}));case 4:case"end":return e.stop()}}),e)})))).apply(this,arguments)}return w.onopen=function(){var e=Object(u.a)(l.a.mark((function e(t){return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,i.a.send("VKWebAppGetAuthToken",{app_id:7966180,scope:""});case 2:e.sent.access_token&&H();case 4:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),w.onerror=function(){var e=Object(u.a)(l.a.mark((function e(t){return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:R("\u041e\u0448\u0438\u0431\u043a\u0430 \u043f\u043e\u0434\u043a\u043b\u044e\u0447\u0435\u043d\u0438\u044f \u043a \u0441\u0435\u0440\u0432\u0435\u0440\u0443. \u041f\u043e\u043f\u0440\u043e\u0431\u0443\u0439 \u0437\u0430\u0439\u0442\u0438 \u0447\u0443\u0442\u044c \u043f\u043e\u0437\u0436\u0435."),n("errorPage"),y(null);case 3:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),w.onclose=function(){var e=Object(u.a)(l.a.mark((function e(t){return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:R("\u041e\u0448\u0438\u0431\u043a\u0430 \u043f\u043e\u0434\u043a\u043b\u044e\u0447\u0435\u043d\u0438\u044f \u043a \u0441\u0435\u0440\u0432\u0435\u0440\u0443. \u041f\u043e\u043f\u0440\u043e\u0431\u0443\u0439 \u0437\u0430\u0439\u0442\u0438 \u0447\u0443\u0442\u044c \u043f\u043e\u0437\u0436\u0435."),n("errorPage"),y(null);case 3:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),w.onmessage=function(e){try{var t=JSON.parse(e.data);switch(t.event){case"setscore":N(+A+ +t.value);break;case"fact":T(t.value);break;case"online":I(t.value);break;case"error":R(t.value),console.log(t.value),n("errorPage"),y(null);break;case"transfercomplite":N(t.value),y(Object(O.jsx)(b.v,{before:Object(O.jsx)(j.a,{fill:"black"===J?"white":"black"}),duration:1300,onClose:function(){return y(null)},children:"\u041f\u0435\u0440\u0435\u0432\u043e\u0434 \u0432\u044b\u043f\u043e\u043b\u043d\u0435\u043d."}));break;case"transferalert":y(Object(O.jsx)(b.d,{actions:[{title:"\u0417\u0430\u043a\u0440\u044b\u0442\u044c",mode:"destructive",autoclose:!0}],actionsLayout:"vertical",onClose:function(){return y(null)},header:"\u041d\u043e\u0432\u044b\u0439 \u043f\u0435\u0440\u0435\u0432\u043e\u0434",text:"".concat(t.about.first_name," \u043f\u0435\u0440\u0435\u0432\u0435\u043b \u0432\u0430\u043c ").concat(t.summa," \u0441\u0435\u043a\u0443\u043d\u0434")}));break;case"good":if(n("home"),y(null),window.location.hash.indexOf("#t")>-1){var c=function(){var e=Object(u.a)(l.a.mark((function e(){var t,c,n;return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=btoa(window.location.search),e.next=3,fetch("https://h154851.srv11.test-hf.su/void/api.php?action=getuser&key="+t+"&id="+r);case 3:return c=e.sent,e.next=6,c.json();case 6:"good"==(n=e.sent).status&&y(Object(O.jsxs)(b.a,{onClose:function(){return y(null)},children:[Object(O.jsx)(b.k,{header:"\u041e\u0448\u0438\u0431\u043a\u0430",mode:"error",id:"transferalert",style:{display:"none",color:"red",marginRight:8}}),Object(O.jsxs)(b.s,{before:Object(O.jsx)(b.f,{size:48,src:n.response.photo_200}),caption:"\u041f\u043e\u043b\u0443\u0447\u0438\u0442 \u0432\u0430\u0448\u0438 \u0441\u0435\u043a\u0443\u043d\u0434\u044b",children:[n.response.first_name," ",n.response.last_name]}),Object(O.jsx)(b.j,{top:"\u0421\u0443\u043c\u043c\u0430",children:Object(O.jsx)(b.m,{id:"summa",type:"number"})}),Object(O.jsx)(b.b,{onClick:function(){var e=document.getElementById("summa").value;w.send(JSON.stringify({event:"transfer",params:window.location.search,toid:r,summa:e}))},children:"\u041f\u0435\u0440\u0435\u0432\u0435\u0441\u0442\u0438"}),Object(O.jsx)(b.b,{autoclose:!0,mode:"destructive",children:"\u0417\u0430\u043a\u0440\u044b\u0442\u044c"})]}));case 8:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),r=window.location.hash.replace(/[^+\d]/g,"");c()}break;case"errortransfer":try{document.getElementById("transferalert").style.display="block",document.getElementById("transferalert").innerHTML=t.message}catch(a){}}}catch(a){console.log("\u041e\u0448\u0438\u0431\u043a\u0430 "+a)}},Object(O.jsx)(b.c,{children:Object(O.jsx)(b.e,{children:Object(O.jsxs)(b.x,{activePanel:c,popout:v,children:[Object(O.jsx)(m,{id:"home",fetchedUser:o,go:q,Online:_,setPopout:y,Score:A,Fact:E}),Object(O.jsx)(x,{id:"errorPage",Erorr:L}),Object(O.jsx)(k,{id:"loading"}),Object(O.jsx)(g,{id:"persik",go:q})]})})})};i.a.send("VKWebAppInit"),a.a.render(Object(O.jsx)(y,{}),document.getElementById("root"))},30:function(e,t,c){}},[[126,1,2]]]);
//# sourceMappingURL=main.68f48007.chunk.js.map