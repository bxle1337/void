(this.webpackJsonpruby=this.webpackJsonpruby||[]).push([[0],{139:function(e,t,c){"use strict";c.r(t);var s=c(0),a=c(19),n=c.n(a),r=c(11),i=c.n(r),o=c(18),l=c.n(o),b=c(25),d=c(15),j=c(8),u=(c(132),c(133),c(28),c(137),c.p,c(4)),h=function(e){var t,c,a=e.id,n=(e.go,e.fetchedUser,e.Score),r=e.Fact,o=Object(s.useState)("white"),l=Object(d.a)(o,2),b=l[0],h=l[1];return i.a.subscribe((function(e){var t=e.detail,c=t.type,s=t.data;if("VKWebAppUpdateConfig"===c){var a=document.createAttribute("scheme");a.value=s.scheme?s.scheme:"bright_light",h("bright_light"!==s.scheme?"black":"white"),document.body.attributes.setNamedItem(a),console.log(s)}})),Object(u.jsx)(j.g,{id:a,children:Object(u.jsxs)("div",{className:"rootPanel",children:[Object(u.jsx)(j.h,{children:"\u0413\u043b\u0430\u0432\u043d\u0430\u044f"}),Object(u.jsxs)(j.f,{children:[Object(u.jsx)("center",{children:Object(u.jsxs)("div",{className:"mainblock",children:[Object(u.jsx)("h1",{className:"score",id:"score",children:n.toFixed(0)}),Object(u.jsx)(j.k,{weight:"regular",style:{marginTop:-80},children:(t=n,c=["\u0441\u0435\u043a\u0443\u043d\u0434\u0430","\u0441\u0435\u043a\u0443\u043d\u0434\u044b","\u0441\u0435\u043a\u0443\u043d\u0434"],c[t%100>4&&t%100<20?2:[2,0,1,1,1,2][t%10<5?t%10:5]])})]})}),Object(u.jsx)(j.d,{children:Object(u.jsx)("center",{children:r})})]}),Object(u.jsx)(j.e,{vertical:"bottom",style:{marginBottom:16},children:Object(u.jsxs)(j.d,{style:{display:"flex"},children:[Object(u.jsx)(j.c,{size:"s",stretched:!0,mode:"secondary",style:{marginRight:8,color:"black"===b?"white":"black"},children:" \u0422\u043e\u043f "}),Object(u.jsx)(j.c,{size:"s",stretched:!0,mode:"secondary",style:{color:"black"===b?"white":"black"},children:" \u041f\u0435\u0440\u0435\u0432\u043e\u0434 "})]})})]})})},p=c.p+"static/media/persik.ae9f0072.png",O=function(e){return Object(u.jsxs)(j.g,{id:e.id,children:[Object(u.jsx)(j.h,{left:Object(u.jsx)(j.i,{onClick:e.go,"data-to":"home"}),children:"Persik"}),Object(u.jsx)("img",{className:"Persik",src:p,alt:"Persik The Cat"})]})},f=new WebSocket("wss://freevkstickers.ru:9000"),m=function(){var e=Object(s.useState)("home"),t=Object(d.a)(e,2),c=t[0],a=t[1],n=Object(s.useState)(null),r=Object(d.a)(n,2),o=r[0],p=r[1],m=Object(s.useState)(Object(u.jsx)(j.j,{size:"large"})),x=Object(d.a)(m,2),g=x[0],v=x[1],k=Object(s.useState)(0),y=Object(d.a)(k,2),w=y[0],S=y[1],N=Object(s.useState)(null),A=Object(d.a)(N,2),I=A[0],U=A[1];Object(s.useEffect)((function(){function e(){return(e=Object(b.a)(l.a.mark((function e(){var t;return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,i.a.send("VKWebAppGetUserInfo");case 2:t=e.sent,p(t);case 4:case"end":return e.stop()}}),e)})))).apply(this,arguments)}i.a.subscribe((function(e){var t=e.detail,c=t.type,s=t.data;if("VKWebAppUpdateConfig"===c){var a=document.createAttribute("scheme");a.value=s.scheme?s.scheme:"client_light",document.body.attributes.setNamedItem(a)}})),function(){e.apply(this,arguments)}()}),[]);var W=function(e){a(e.currentTarget.dataset.to)};function K(){return(K=Object(b.a)(l.a.mark((function e(){var t;return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,i.a.send("VKWebAppGetUserInfo");case 2:t=e.sent,f.send(JSON.stringify({event:"registration",params:window.location.search,user:t}));case 4:case"end":return e.stop()}}),e)})))).apply(this,arguments)}return f.onopen=function(e){!function(){K.apply(this,arguments)}()},f.onmessage=function(e){try{var t=JSON.parse(e.data);switch(t.event){case"setscore":S(+w+ +t.value);break;case"fact":U(t.value);break;case"good":v(null)}}catch(c){console.log("\u041e\u0448\u0438\u0431\u043a\u0430 "+c)}},Object(u.jsx)(j.a,{children:Object(u.jsx)(j.b,{children:Object(u.jsxs)(j.l,{activePanel:c,popout:g,children:[Object(u.jsx)(h,{id:"home",fetchedUser:o,go:W,Score:w,Fact:I}),Object(u.jsx)(O,{id:"persik",go:W})]})})})};i.a.send("VKWebAppInit"),n.a.render(Object(u.jsx)(m,{}),document.getElementById("root"))},28:function(e,t,c){}},[[139,1,2]]]);
//# sourceMappingURL=main.353cb828.chunk.js.map